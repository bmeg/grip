<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Graph Model &middot; GRIP</title>
  

  
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/poole.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/darcula.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/syntax.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/theme.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://bmeg.github.io/grip/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://bmeg.github.io/grip/favicon.png">

  <script src="https://bmeg.github.io/grip/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://bmeg.github.io/grip"><h1>GRIP</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://bmeg.github.io/grip/download//">Download</a></li>
          <li><a href="https://bmeg.github.io/grip/docs/">Docs</a></li>
          <li><a href="https://github.com/bmeg/grip">GitHub</a></li>
          <li><a href="https://gitter.im/bmeg/grip">Chat</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/compbio/"><h2>OHSU Comp Bio</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li>
          
          <a href="https://bmeg.github.io/grip/docs/"
             class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li>
          
          <a href="https://bmeg.github.io/grip/download/"
             class="sidebar-nav-item "
          >Download</a></li>
          
        
        <li>
          
          <span class="intermediate">GRIP Commands</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/server/"
                   class="sidebar-nav-item "
                >server</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/query/"
                   class="sidebar-nav-item "
                >query</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/list/"
                   class="sidebar-nav-item "
                >list</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/drop/"
                   class="sidebar-nav-item "
                >drop</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/mongoload/"
                   class="sidebar-nav-item "
                >mongoload</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/er/"
                   class="sidebar-nav-item "
                >er</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Database Configuration</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/elastic/"
                   class="sidebar-nav-item "
                >Elasticsearch</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/kvstore/"
                   class="sidebar-nav-item "
                >Embedded KV Store</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/mongo/"
                   class="sidebar-nav-item "
                >MongoDB</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/psql/"
                   class="sidebar-nav-item "
                >PostgreSQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/sql/"
                   class="sidebar-nav-item "
                >SQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/gripper/"
                   class="sidebar-nav-item "
                >GRIPPER</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">GRIP Plugable External Resources</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/gripper/"
                   class="sidebar-nav-item "
                >Intro</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/proxy/"
                   class="sidebar-nav-item "
                >External Resource Proxies</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/graphmodel/"
                   class="sidebar-nav-item  active"
                >Graph Model</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Query a Graph</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/getting_started/"
                   class="sidebar-nav-item "
                >Getting Started</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/operations/"
                   class="sidebar-nav-item "
                >Operations</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/jsonpath/"
                   class="sidebar-nav-item "
                >Referencing Fields</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/jobs_api/"
                   class="sidebar-nav-item "
                >Jobs API</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Tutorials</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/tutorials/amazon/"
                   class="sidebar-nav-item "
                >Amazon Purchase Network</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/tutorials/tcga-rna/"
                   class="sidebar-nav-item "
                >TCGA RNA Expression</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Security</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/security/basic/"
                   class="sidebar-nav-item "
                >Basic Auth</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">GraphQL</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/graphql/graphql/"
                   class="sidebar-nav-item "
                >GraphQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/graphql/graph_schemas/"
                   class="sidebar-nav-item "
                >Graph Schemas</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Developers</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://github.com/bmeg/grip/blob/master/gripql/gripql.proto"
                   class="sidebar-nav-item "
                >API</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://godoc.org/github.com/bmeg/grip"
                   class="sidebar-nav-item "
                >GoDoc</a></li>
            </ul>
          </li>
          
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    <h1 id="gripper">GRIPPER</h1>
<p>GRIP Plugable External Resources</p>
<h2 id="graph-model">Graph Model</h2>
<p>The graph model describes how GRIP will access multiple gripper servers. The mapping
of these data resources is done using a graph. The <code>vertices</code> represent how each vertex
type will be mapped, and the <code>edges</code> describe how edges will be created. The <code>gid</code>
of each vertex represents the prefix domain of all vertices that can be found in that
source.</p>
<p>The <code>sources</code> referenced by the graph are provided to GRIP at run time, each named resource is a
different GRIPPER plugin that abstracts an external resource.
The <code>vertices</code> section describes how different collections
found in these sources will be turned into Vertex found in the graph. Finally, the
<code>edges</code> section describes the different kinds of rules that can be used build the
edges in the graph.</p>
<p>Edges can be built from two rules <code>fieldToField</code> and <code>edgeTable</code>. In <code>fieldToField</code>,
a field value found in one vertex can be used to look up matching destination vertices
by using an indexed field found in another collection that has been mapped to a vertex.
For <code>edgeTable</code> connections, there is a single collection that represents a connection between
two other collections that have been mapped to vertices.</p>
<h2 id="runtime-external-resource-config">Runtime External Resource Config</h2>
<p>External resources are passed to GRIP as command line options. For the command line:</p>
<pre><code>grip server config.yaml --er tableServer=localhost:50051 --er pfb=localhost:50052
</code></pre><p><code>tableServer</code> is a ER plugin that serves table data (see <code>gripper/test-graph</code>)
while <code>pfb</code> parses PFB based files (see <a href="https://github.com/bmeg/grip_pfb">https://github.com/bmeg/grip_pfb</a> )</p>
<p>The <code>config.yaml</code> is</p>
<pre><code>Default: badger

Drivers:
  badger:
    Badger: grip-badger.db

  swapi-driver:
    Gripper:
      ConfigFile: ./swapi.yaml
      Graph: swapi

</code></pre><p>This runs with a default <code>badger</code> based driver, but also provides a GRIPPER based
graph from the <code>swapi</code> mapping (see example graph map below).</p>
<h2 id="example-graph-map">Example graph map</h2>
<pre><code>vertices:
  - gid: &quot;Character:&quot;
    label: Character
    data:
      source: tableServer
      collection: Character

  - gid: &quot;Planet:&quot;
    label: Planet
    data:
      collection: Planet
      source: tableServer

  - gid: &quot;Film:&quot;
    label: Film
    data:
      collection: Film
      source: tableServer

  - gid: &quot;Species:&quot;
    label: Species
    data:
      source: tableServer
      collection: Species

  - gid: &quot;Starship:&quot;
    label: Starship
    data:
      source: tableServer
      collection: Starship

  - gid: &quot;Vehicle:&quot;
    label: Vehicle
    data:
      source: tableServer
      collection: Vehicle

edges:
  - gid: &quot;homeworld&quot;
    from: &quot;Character:&quot;
    to: &quot;Planet:&quot;
    label: homeworld
    data:
      fieldToField:
        fromField: $.homeworld
        toField: $.id

  - gid: species
    from: &quot;Character:&quot;
    to: &quot;Species:&quot;
    label: species
    data:
      fieldToField:
        fromField: $.species
        toField: $.id

  - gid: people
    from: &quot;Species:&quot;
    to: &quot;Character:&quot;
    label: people
    data:
      edgeTable:
        source: tableServer
        collection: speciesCharacter
        fromField: $.from
        toField: $.to

  - gid: residents
    from: &quot;Planet:&quot;
    to: &quot;Character:&quot;
    label: residents
    data:
      edgeTable:
        source: tableServer
        collection: planetCharacter
        fromField: $.from
        toField: $.to

  - gid: filmVehicles
    from: &quot;Film:&quot;
    to: &quot;Vehicle:&quot;
    label: &quot;vehicles&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmVehicles
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: vehicleFilms
    to: &quot;Film:&quot;
    from: &quot;Vehicle:&quot;
    label: &quot;films&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmVehicles
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;

  - gid: filmStarships
    from: &quot;Film:&quot;
    to: &quot;Starship:&quot;
    label: &quot;starships&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmStarships
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: starshipFilms
    to: &quot;Film:&quot;
    from: &quot;Starship:&quot;
    label: &quot;films&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmStarships
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;

  - gid: filmPlanets
    from: &quot;Film:&quot;
    to: &quot;Planet:&quot;
    label: &quot;planets&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmPlanets
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: planetFilms
    to: &quot;Film:&quot;
    from: &quot;Planet:&quot;
    label: &quot;films&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmPlanets
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;

  - gid: filmSpecies
    from: &quot;Film:&quot;
    to: &quot;Species:&quot;
    label: &quot;species&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmSpecies
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: speciesFilms
    to: &quot;Film:&quot;
    from: &quot;Species:&quot;
    label: &quot;films&quot;
    data:
      edgeTable:
        source: tableServer
        collection: filmSpecies
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;

  - gid: filmCharacters
    from: &quot;Film:&quot;
    to: &quot;Character:&quot;
    label: characters
    data:
      edgeTable:
        source: tableServer
        collection: filmCharacters
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: characterFilms
    from: &quot;Character:&quot;
    to: &quot;Film:&quot;
    label: films
    data:
      edgeTable:
        source: tableServer
        collection: filmCharacters
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;

  - gid: characterStarships
    from: &quot;Character:&quot;
    to: &quot;Starship:&quot;
    label: &quot;starships&quot;
    data:
      edgeTable:
        source: tableServer
        collection: characterStarships
        fromField: &quot;$.from&quot;
        toField: &quot;$.to&quot;

  - gid: starshipCharacters
    to: &quot;Character:&quot;
    from: &quot;Starship:&quot;
    label: &quot;pilots&quot;
    data:
      edgeTable:
        source: tableServer
        collection: characterStarships
        toField: &quot;$.from&quot;
        fromField: &quot;$.to&quot;
</code></pre>
  </div>

</div>
</body>
</html>
