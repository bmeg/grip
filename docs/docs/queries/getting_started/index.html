<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Getting Started &middot; GRIP</title>
  

  
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/poole.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/darcula.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/syntax.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/theme.css">
  <link rel="stylesheet" href="https://bmeg.github.io/grip/css/funnel.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://bmeg.github.io/grip/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://bmeg.github.io/grip/favicon.png">

  <script src="https://bmeg.github.io/grip/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

  <div class="global-header">
    <div class="global-header-container">
      <div class="global-header-home">
        <a href="https://bmeg.github.io/grip"><h1>GRIP</h1></a>
      </div>
      <ul class="global-header-nav">
          <li><a href="https://bmeg.github.io/grip/download//">Download</a></li>
          <li><a href="https://bmeg.github.io/grip/docs/">Docs</a></li>
          <li><a href="https://github.com/bmeg/grip">GitHub</a></li>
          <li><a href="https://gitter.im/bmeg/grip">Chat</a></li>
        </ul>
      <div class="global-header-ohsucb">
        <a href="https://www.ohsu.edu/compbio/"><h2>OHSU Comp Bio</h2></a>
      </div>
    </div>
  </div>


<div class="content section group">

  <div class="sidebar col span_3_of_12">
    <ul class="sidebar-nav">
      
      
        
        <li>
          
          <a href="https://bmeg.github.io/grip/docs/"
             class="sidebar-nav-item "
          >Overview</a></li>
          
        
        <li>
          
          <a href="https://bmeg.github.io/grip/download/"
             class="sidebar-nav-item "
          >Download</a></li>
          
        
        <li>
          
          <span class="intermediate">GRIP Commands</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/server/"
                   class="sidebar-nav-item "
                >server</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/query/"
                   class="sidebar-nav-item "
                >query</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/list/"
                   class="sidebar-nav-item "
                >list</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/drop/"
                   class="sidebar-nav-item "
                >drop</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/mongoload/"
                   class="sidebar-nav-item "
                >mongoload</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/commands/er/"
                   class="sidebar-nav-item "
                >er</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Database Configuration</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/elastic/"
                   class="sidebar-nav-item "
                >Elasticsearch</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/kvstore/"
                   class="sidebar-nav-item "
                >Embedded KV Store</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/mongo/"
                   class="sidebar-nav-item "
                >MongoDB</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/psql/"
                   class="sidebar-nav-item "
                >PostgreSQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/sql/"
                   class="sidebar-nav-item "
                >SQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/databases/gripper/"
                   class="sidebar-nav-item "
                >GRIPPER</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">GRIP Plugable External Resources</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/gripper/"
                   class="sidebar-nav-item "
                >Intro</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/proxy/"
                   class="sidebar-nav-item "
                >External Resource Proxies</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/gripper/graphmodel/"
                   class="sidebar-nav-item "
                >Graph Model</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Query a Graph</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/getting_started/"
                   class="sidebar-nav-item  active"
                >Getting Started</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/operations/"
                   class="sidebar-nav-item "
                >Operations</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/jsonpath/"
                   class="sidebar-nav-item "
                >Referencing Fields</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/queries/jobs_api/"
                   class="sidebar-nav-item "
                >Jobs API</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Tutorials</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/tutorials/amazon/"
                   class="sidebar-nav-item "
                >Amazon Purchase Network</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/tutorials/tcga-rna/"
                   class="sidebar-nav-item "
                >TCGA RNA Expression</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Security</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/security/basic/"
                   class="sidebar-nav-item "
                >Basic Auth</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">GraphQL</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/graphql/graphql/"
                   class="sidebar-nav-item "
                >GraphQL</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://bmeg.github.io/grip/docs/graphql/graph_schemas/"
                   class="sidebar-nav-item "
                >Graph Schemas</a></li>
            </ul>
          </li>
          
          
        
        <li>
          
          <span class="intermediate">Developers</span></li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://github.com/bmeg/grip/blob/master/gripql/gripql.proto"
                   class="sidebar-nav-item "
                >API</a></li>
            </ul>
          </li>
          
          <li>
            <ul class="sidebar-nav sidebar-nav-nested">
              <li>
                <a href="https://godoc.org/github.com/bmeg/grip"
                   class="sidebar-nav-item "
                >GoDoc</a></li>
            </ul>
          </li>
          
          
        
      
    </ul>
  </div>

  <div class="main col span_8_of_12">
    <h1 id="getting-started">Getting Started</h1>
<p>GRIP has an API for making graph queries using structured data. Queries are defined using a series of step <a href="https://bmeg.github.io/grip/docs/queries/operations">operations</a>.</p>
<h2 id="install-the-python-client">Install the Python Client</h2>
<p>Available on <a href="https://pypi.org/project/gripql/">PyPI</a>.</p>
<pre><code>pip install gripql
</code></pre><p>Or install the latest development version:</p>
<pre><code>pip install &quot;git+https://github.com/bmeg/grip.git#subdirectory=gripql/python&quot;
</code></pre><h2 id="using-the-python-client">Using the Python Client</h2>
<p>Let&rsquo;s go through the features currently supported in the python client.</p>
<p>First, import the client and create a connection to an GRIP server:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> gripql
G <span style="color:#f92672">=</span> gripql<span style="color:#f92672">.</span>Connection(<span style="color:#e6db74">&#34;https://bmeg.io&#34;</span>)<span style="color:#f92672">.</span>graph(<span style="color:#e6db74">&#34;bmeg&#34;</span>)
</code></pre></div><p>Some GRIP servers may require authorizaiton to access its API endpoints. The client can be configured to pass
authorization headers in its requests.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> gripql

<span style="color:#75715e"># Basic Auth Header - {&#39;Authorization&#39;: &#39;Basic dGVzdDpwYXNzd29yZA==&#39;}</span>
G <span style="color:#f92672">=</span> gripql<span style="color:#f92672">.</span>Connection(<span style="color:#e6db74">&#34;https://bmeg.io&#34;</span>, user<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;test&#34;</span>, password<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;password&#34;</span>)<span style="color:#f92672">.</span>graph(<span style="color:#e6db74">&#34;bmeg&#34;</span>)
<span style="color:#75715e">#</span>

<span style="color:#75715e"># Bearer Token - {&#39;Authorization&#39;: &#39;Bearer iamnotarealtoken&#39;}</span>
G <span style="color:#f92672">=</span> gripql<span style="color:#f92672">.</span>Connection(<span style="color:#e6db74">&#34;https://bmeg.io&#34;</span>, token<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;iamnotarealtoken&#34;</span>)<span style="color:#f92672">.</span>graph(<span style="color:#e6db74">&#34;bmeg&#34;</span>)

<span style="color:#75715e"># OAuth2 / Custom - {&#34;OauthEmail&#34;: &#34;fake.user@gmail.com&#34;, &#34;OauthAccessToken&#34;: &#34;iamnotarealtoken&#34;, &#34;OauthExpires&#34;: 1551985931}</span>
G <span style="color:#f92672">=</span> gripql<span style="color:#f92672">.</span>Connection(<span style="color:#e6db74">&#34;https://bmeg.io&#34;</span>,  credential_file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;~/.grip_token.json&#34;</span>)<span style="color:#f92672">.</span>graph(<span style="color:#e6db74">&#34;bmeg&#34;</span>)
</code></pre></div><p>Now that we have a connection to a graph instance, we can use this to make all of our queries.</p>
<p>One of the first things you probably want to do is find some vertex out of all of the vertexes available in the system. In order to do this, we need to know something about the vertex we are looking for. To start, let&rsquo;s see if we can find a specific gene:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">result <span style="color:#f92672">=</span> G<span style="color:#f92672">.</span>query()<span style="color:#f92672">.</span>V()<span style="color:#f92672">.</span>hasLabel(<span style="color:#e6db74">&#34;Gene&#34;</span>)<span style="color:#f92672">.</span>has(gripql<span style="color:#f92672">.</span>eq(<span style="color:#e6db74">&#34;symbol&#34;</span>, <span style="color:#e6db74">&#34;TP53&#34;</span>))<span style="color:#f92672">.</span>execute()
<span style="color:#66d9ef">print</span>(result)
</code></pre></div><p>A couple things about this first and simplest query. We start with <code>O</code>, our grip client instance connected to the &ldquo;bmeg&rdquo; graph, and create a new query with <code>.query()</code>. This query is now being constructed. You can chain along as many operations as you want, and nothing will actually get sent to the server until you print the results.</p>
<p>Once we make this query, we get a result:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">[
  {<span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;gid&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;ENSG00000141510&#39;</span>,
  <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;data&#39;</span>: {
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;end&#39;</span>: <span style="color:#ae81ff">7687550</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;description&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;tumor protein p53 [Source:HGNC Symbol%3BAcc:HGNC:11998]&#39;</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;symbol&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;TP53&#39;</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;start&#39;</span>: <span style="color:#ae81ff">7661779</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;seqId&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;17&#39;</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;strand&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;-&#39;</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;ENSG00000141510&#39;</span>,
    <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;chromosome&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;17&#39;</span>
  },
  <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;label&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;Gene&#39;</span>})
]
</code></pre></div><p>This represents the vertex we queried for above. All vertexes in the system will have a similar structure, basically:</p>
<ul>
<li><em>gid</em>: This represents the global identifier for this vertex. In order to draw edges between different vertexes from different data sets we need an identifier that can be constructed from available data. Often, the <code>gid</code> will be the field that you query on as a starting point for a traversal.</li>
<li><em>label</em>: The label represents the type of the vertex. All vertexes with a given label will share many property keys and edge labels, and form a logical group within the system.</li>
<li><em>data</em>: This is where all the data goes. <code>data</code> can be an arbitrary map, and these properties can be referenced during traversals.</li>
</ul>
<p>The data on a query result can be accessed as properties on the result object; for example <code>result[0].data.symbol</code> would return:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;TP53&#39;</span>
</code></pre></div><p>You can also do a <code>has</code> query with a list of items using <code>gripql.within([...])</code> (other conditions exist, see the <code>Conditions</code> section below):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">result <span style="color:#f92672">=</span> G<span style="color:#f92672">.</span>query()<span style="color:#f92672">.</span>V()<span style="color:#f92672">.</span>hasLabel(<span style="color:#e6db74">&#34;Gene&#34;</span>)<span style="color:#f92672">.</span>has(gripql<span style="color:#f92672">.</span>within(<span style="color:#e6db74">&#34;symbol&#34;</span>, [<span style="color:#e6db74">&#34;TP53&#34;</span>, <span style="color:#e6db74">&#34;BRCA1&#34;</span>]))<span style="color:#f92672">.</span>render({<span style="color:#e6db74">&#34;gid&#34;</span>: <span style="color:#e6db74">&#34;_gid&#34;</span>, <span style="color:#e6db74">&#34;symbol&#34;</span>:<span style="color:#e6db74">&#34;symbol&#34;</span>})<span style="color:#f92672">.</span>execute()
<span style="color:#66d9ef">print</span>(result)
</code></pre></div><p>This returns both Gene vertexes:</p>
<pre><code>[
  {u'symbol': u'TP53', u'gid': u'ENSG00000141510'},
  {u'symbol': u'BRCA1', u'gid': u'ENSG00000012048'}
]
</code></pre><p>Once you are on a vertex, you can travel through that vertex&rsquo;s edges to find the vertexes it is connected to. Sometimes you don&rsquo;t even need to go all the way to the next vertex, the information on the edge between them may be sufficient.</p>
<p>Edges in the graph are directional, so there are both incoming and outgoing edges from each vertex, leading to other vertexes in the graph. Edges also have a <em>label</em>, which distinguishes the kind of connections different vertexes can have with one another.</p>
<p>Starting with gene TP53, and see what kind of other vertexes it is connected to.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">result <span style="color:#f92672">=</span> G<span style="color:#f92672">.</span>query()<span style="color:#f92672">.</span>V()<span style="color:#f92672">.</span>hasLabel(<span style="color:#e6db74">&#34;Gene&#34;</span>)<span style="color:#f92672">.</span>has(gripql<span style="color:#f92672">.</span>eq(<span style="color:#e6db74">&#34;symbol&#34;</span>, <span style="color:#e6db74">&#34;TP53&#34;</span>))<span style="color:#f92672">.</span>in_(<span style="color:#e6db74">&#34;TranscriptFor&#34;</span>)render({<span style="color:#e6db74">&#34;gid&#34;</span>: <span style="color:#e6db74">&#34;_gid&#34;</span>, <span style="color:#e6db74">&#34;label&#34;</span>:<span style="color:#e6db74">&#34;_label&#34;</span>})<span style="color:#f92672">.</span>execute()
<span style="color:#66d9ef">print</span>(result)
</code></pre></div><p>Here we have introduced a couple of new steps. The first is <code>.in_()</code>. This starts from wherever you are in the graph at the moment and travels out along all the incoming edges.
Additionally, we have provided <code>TranscriptFor</code> as an argument to <code>.in_()</code>. This limits the returned vertices to only those connected to the <code>Gene</code>  verticies by edges labeled <code>TranscriptFor</code>.</p>
<pre><code>[
  {u'label': u'Transcript', u'gid': u'ENST00000413465'},
  {u'label': u'Transcript', u'gid': u'ENST00000604348'},
  ...
]
</code></pre><p>View a list of all available query operations <a href="https://bmeg.github.io/grip/docs/queries/operations">here</a>.</p>

  </div>

</div>
</body>
</html>
